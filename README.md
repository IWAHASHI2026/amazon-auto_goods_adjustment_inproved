# Amazon 広告 入札調整ツール

Amazon スポンサープロダクト広告の Bulk ファイル（.xlsx）をアップロードすると、指定ルールに従って入札額（Bid）を自動調整し、調整済み .xlsx をダウンロードできる Web アプリです。

## セットアップ

```bash
npm install
npm run dev
```

ブラウザで `http://localhost:5173` を開きます。

## 使い方

1. Amazon からダウンロードした Bulk ファイル（.xlsx）をドラッグ＆ドロップ、またはクリックしてアップロード
2. 必要に応じてルール設定（クリック閾値・ROAS 境界・各Δ）を変更
3. 「変更したルールで再処理」ボタンで再適用も可能
4. 「調整済みファイルをダウンロード」で結果を取得

## 入札調整ルール（デフォルト値）

| # | 条件 | Δ（調整値） |
|---|------|------------|
| 1 | ROAS = 0 かつ クリック数 ≤ 30 | -1 |
| 2 | ROAS = 0 かつ クリック数 > 30 | -7 |
| 3 | 0 < ROAS < 3 | -5 |
| 4 | 3 ≤ ROAS < 6 | 0（変更なし） |
| 5 | ROAS ≥ 6 | +3 |

- 調整後の入札額 = 現在の入札額 + Δ
- 入札額は 1〜200 の範囲でクランプ
- 小数第2位で四捨五入

## 処理概要

1. シート「スポンサープロダクト広告キャンペーン」を読み込み
2. 列はヘッダー名で特定（エンティティ / ROAS / クリック数 / 入札額 / 操作）
3. 「エンティティ」列の値が「商品ターゲティング」の行のみ残し、それ以外を削除
4. 残った行の入札額をルールに従い調整
5. 「操作」列に "update" を代入
6. 調整済み .xlsx を生成

## 数値の扱い

- 空欄 / null → 0
- 変換不能な文字列（"--" 等）→ 0

## 技術スタック

- React 19 + TypeScript
- Vite 7
- Tailwind CSS v4
- shadcn/ui コンポーネント
- xlsx（SheetJS）
- Vitest（テスト）
- ESLint

## スクリプト

```bash
npm run dev       # 開発サーバー
npm run build     # プロダクションビルド
npm run preview   # ビルド結果のプレビュー
npm run lint      # ESLint
npm run test      # テスト実行
npm run test:watch # テスト（ウォッチモード）
```
